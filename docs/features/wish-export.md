---
headerDepth: 0
---

# 祈愿记录   

## 祈愿记录的导出

![祈愿导出](/images/202211/wish-export.png)

有关原神祈愿记录导出的技术原理，你可以参阅我们的[**祈愿系统与导出原理**](/FAQ/Gacha-system-and-export-principal.md)一文

## 从本地缓存获取最新的祈愿记录
- 前置条件：登录**需要获取祈愿记录**的游戏账号对应的**米游社账号**
  - 需要先添加你的米游社 Cookie，即点击`登陆`按钮，继而点击`网页米游社`按钮，按软件内的文字提示，成功添加该米游社账号
    - 注意：在使用`网页米游社`功能时，请将`胡桃`窗口最大化，以便于让内置浏览器显示的内容完整
    - 在使用`网页米游社`功能时，存在部分杀毒软件导致获取到的Cookie不完整的情况，故建议自行关闭
  - 成功`添加米游社账号`后，`新添加的米游社账号`将出现于`账号`列表中

- 从左侧菜单栏进入`祈愿记录`   
- 启动游戏并登入游戏，此时暂**不打开**游戏内的祈愿记录   
- 在`祈愿记录`界面中，点击`刷新`按钮，继而点击`从缓存刷新`
- 在`游戏内`打开游戏内的祈愿记录，并停止操作，切换回`胡桃`界面
- 等待祈愿记录获取完成
  - 若上述步骤出现问题，可尝试**重新打开胡桃**
  - 如果你通过`其它工具`获取到了你祈愿历史记录的Url，可以选择`手动输入Url`并根据提示操作，但应注意此类Url**具有时效性**，随时可能过期

## 利用Stoken从服务器获取最新的祈愿记录
   
::: warning
自`胡桃 1.2.1 版本`，由于米游社的相关后端逻辑改动，胡桃暂时取消内置的`获取Stoken`的相关功能
:::
   
- 前置条件：在`账号`功能内的`Cookie操作`功能下，点击`手动输入`，输入带有Stoken字段的米游社Cookie
  - 获取方法本文档暂无说明

## 对于全量刷新选项的补充说明
在默认情况下，胡桃工具箱会在匹配到本地已有记录的祈愿ID后停止导入。
但如果你希望完整地获取原神服务器中所有的历史记录（即使它已经存在于你的本地祈愿记录中），你可以勾选`全量刷新`。

**不勾选`全量刷新`不会使你丢失祈愿数据，勾选`全量刷新`也不会让你的本地记录错误地额外记录一次相同的祈愿数据。**

## 从其它祈愿导出程序导入祈愿数据

胡桃工具箱支持导入 `UIGF数据格式` 的祈愿记录数据。

如果你希望导入这一类数据，可以：
- 启动胡桃工具箱，从左侧菜单栏进入`祈愿记录`
- 点击右上角的`导入`
  - 选择`从 UIGF Json 文件导入`
  - 选择你的 UIGF 数据文件
  - 根据界面确认导入数据

## 导出祈愿数据

胡桃工具箱支持导出 `UIGF数据格式` 的Json文件格式的祈愿记录数据。

如果你希望导出祈愿数据，可以：
- 启动胡桃工具箱，从左侧菜单栏进入`祈愿记录`
- 点击`UID`字样的按钮，选择您要导出的祈愿记录存档
  - 若您只有一个账号的祈愿记录存档，则跳过此步骤
- 点击`导出`按钮
  - 点击`导出到UIGF Json文件`按钮
  - 在弹出的界面选择您需要将此`导出的祈愿记录数据`文件存放的位置，并点击`导出`
- 导出完成

